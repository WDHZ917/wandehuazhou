<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wdehuazhou</title>
    <link rel="stylesheet" href="./assets/css/style.css">
    <!-- å¼•å…¥é…ç½®æ–‡ä»¶ -->
    <script type="module">
        import amapKey from './assets/script/config.js';
        const script = document.createElement('script');
        script.src = `https://webapi.amap.com/maps?v=2.0&key=${amapKey}`;
        document.head.appendChild(script);
    </script>
</head>

<body>
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <nav class="top-navbar">
        <div class="site-name">ç²¥å°ç«™</div>
        <div class="contact-me">è”ç³»æˆ‘</div>
    </nav>

    <!-- æ—¶é—´å¤©æ°”æ¨¡å— -->
    <div class="col times">
        <div class="time cards" id="upWeather">
            <div class="timeshow" id="time">åŠ è½½ä¸­...</div>
            <div class="weather" id="weather">åŠ è½½ä¸­...</div>
        </div>
    </div>

    <div class="swithDivContain">
        <div class="longCanvas">
            <div class="introduction">
                <video src="./assets/music/your_music.mp3" autoplay hidden></video>
                <div class="mask">
                    <div class="introductionText"><span>è‡ªå®šä¹‰çš„æ–‡å­—å†…å®¹</span></div>
                    <span class="introductionTitle">â€”â€”â€”â€”ã€Šè‡ªå®šä¹‰æ ‡é¢˜ã€‹</span>
                </div>
                <div class="seeMore">ğŸ¤¤</div>
            </div>

            <div class="showMe">
                <div class="showMeContent">
                    <div class="headImg"></div>
                    <p>ä½ å¥½ï¼Œè¿™æ˜¯æ–°ç½‘ç«™</p>
                    <p>æ¬¢è¿æ¥åˆ°è¿™é‡Œ</p>
                    <p>å¯ä»¥æ·»åŠ ä½ çš„é“¾æ¥ <a target="_blank" href="https://example.com">ç‚¹è¿™é‡Œ</a></p>
                    <div class="thankList">æ„Ÿè°¢ä¸€äº›å¸®åŠ©è¿‡ä½ çš„äººï¼š
                        <a target="_blank" href="https://example.com">ç¤ºä¾‹é“¾æ¥1</a>
                        <a target="_blank" href="https://example.com">ç¤ºä¾‹é“¾æ¥2</a>
                    </div>
                </div>
            </div>

            <div class="thirdpage">
                <p>ç”¨äºæµ‹è¯•æ»šåŠ¨è®¡ç®—é€»è¾‘</p>
                <p>åç»­å¯æ·»åŠ çš„åŠŸèƒ½ï¼šå³ä¾§æ˜¾ç¤ºæ»šåŠ¨å®šä½ç‚¹</p>
                <p>å¾…åŠï¼šæ·»åŠ æ–°åŠŸèƒ½</p>
            </div>

            <!-- ç¬¬å››é¡µ -->
            <div class="fourthpage">
                <p>è¿™æ˜¯æ–°å¢çš„æ»šåŠ¨é¡µé¢</p>
            </div>

            <!-- ç¬¬äº”é¡µ -->
            <div class="fifthpage">
                <p>è¿™æ˜¯æ–°å¢çš„æ»šåŠ¨é¡µé¢</p>
            </div>
        </div>
    </div>
    <script src="./assets/script/main.js"></script>
    <script type="module">
        // å®æ—¶æ›´æ–°æ—¶é—´
        function updateTime() {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const weekday = ['æ˜ŸæœŸæ—¥', 'æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­'][now.getDay()];
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            const timeString = `${year} å¹´ ${month} æœˆ ${day} æ—¥ <span class="weekday">${weekday}</span><br><span class="time-text">${hours}:${minutes}:${seconds}</span>`;
            document.getElementById('time').innerHTML = timeString;
        }

        // è·å–å¤©æ°”ä¿¡æ¯
        async function getWeather() {
            try {
                const amapKey = await import('./assets/script/config.js');
                await new Promise((resolve) => {
                    AMap.plugin('AMap.Weather', function () {
                        var weather = new AMap.Weather();
                        // æŸ¥è¯¢å®æ—¶å¤©æ°”ï¼Œè¿™é‡Œä»¥å¹¿å·ä¸ºä¾‹ï¼Œä½ å¯ä»¥ä¿®æ”¹ä¸ºå…¶ä»–åŸå¸‚
                        weather.getLive('å¹¿å·', function (err, data) {
                            if (!err) {
                                const weatherString = `<span id="city_text">${data.city}</span>&nbsp;
                                               <span id="wea_text">${data.weather}</span>&nbsp;
                                               <span id="tem_text">${data.temperature}Â°C&nbsp;</span>
                                               <span id="win_text">${data.windDirection}</span>
                                               <span id="win_speed">${data.windPower}çº§</span>`;
                                document.getElementById('weather').innerHTML = weatherString;
                            } else {
                                let errorMessage = 'è·å–å¤©æ°”ä¿¡æ¯å¤±è´¥';
                                if (err.info) {
                                    errorMessage += `: ${err.info}`;
                                }
                                console.error(errorMessage, err);
                                document.getElementById('weather').innerHTML = errorMessage;
                            }
                            resolve();
                        });
                    });
                });
            } catch (error) {
                console.error('åŠ è½½é…ç½®æ–‡ä»¶æˆ–è·å–å¤©æ°”ä¿¡æ¯æ—¶å‡ºé”™:', error);
                document.getElementById('weather').innerHTML = 'åŠ è½½é…ç½®æ–‡ä»¶æˆ–è·å–å¤©æ°”ä¿¡æ¯æ—¶å‡ºé”™';
            }
        }
        // é¡µé¢åŠ è½½å®Œæˆåï¼Œæ¯ç§’æ›´æ–°æ—¶é—´å¹¶è·å–å¤©æ°”ä¿¡æ¯
        window.onload = function () {
            updateTime();
            setInterval(updateTime, 1000);
            getWeather();
        };
    </script>
</body>

</html>